if(!Array.prototype.indexOf){Array.prototype.indexOf=function(d){for(var c=0;c<this.length;c++){if(this[c]===d){return c}}return -1}}if(!Array.prototype.contains){Array.prototype.contains=function(d){for(var c=0;c<this.length;c++){if(this[c]===d){return true}}return false}}if(!String.prototype.contains){String.prototype.contains=function(a){return this.indexOf(a)!=-1}}if(!String.prototype.swap){String.prototype.swap=function(c,d){return this.contains(c)?this.replace(c,d):this.replace(d,c)}}var _debug=false;var _maxCart=100;var _cartOverMaxMsg="Sorry, you can only add up to "+_maxCart+" items to your cart.";var _cartAddErrorMsg="There was a problem adding the item(s) to your cart. Please make sure you have less than 100 items in your cart.";function Rnd(){return Math.floor(Math.random()*100001).toString()}var waiting=false;function wait(b,a){try{if(!waiting){b=b==null?$("body"):b;a=a==null?"Loading":a;b.css("cursor","wait");waiting=true}}catch(c){}}function unwait(a){if(waiting){a=a==null?$("body"):a;a.css("cursor","default")}waiting=false}function debug(a){if(_debug){feedback("debug",a)}}function feedback(b,a){unwait();var e="Message";var c="/public/images/icons/silk/information.png";var d=3000;switch(b){case"error":e="Error";c="/public/images/icons/silk/error.png";d=8000;break;case"debug":e="Debugging";c="/public/images/icons/silk/plugin.png";d=8000;break}$.gritter.add({title:e,time:d,image:c,text:a})}function pluralize(b,a){return a==1?b:b+"s"}function setupTooltips(){$("[title]").tipTip()}function toggleTagBoxSelection(c,b,a){c.siblings().removeClass(b);if(a){c.addClass(b)}}function millSecsToTimeCode(d,a){var c=Math.floor(d/1000);var e=Math.floor(c/60);var b=c-(e*60);return(a?(e+":"+(b<10?"0"+b:b)):{min:e,sec:b})}function toFileSizeDescription(a){return parseInt((a/(1024*1024))).toString()+" MB"}function toYesNo(a){return a?"Yes":"No"}var contentDetailPanelId="#cw-content-detail-panel";var searchOptionsPanelId="#cw-search-options-panel";var tagBoxSelectedClass="cw-blue";var inputSelectedClass="cw-input-highlight";var isContentDetailShowing;var isContentViewMode;var isContentEditMode;var isContentSaveMode;var lastContentDetailLinkClicked;var lastContentEditLinkClicked;var _currentContentDetailTab;var aCache={};function setupAutoComplete(){$(".cw-autocomplete").autocomplete({source:function(c,d){var b=$(this)[0].element[0].alt;if(b){try{if(aCache.term==c.term&&aCache.field==b&&aCache.content){d(aCache.content);return}if(new RegExp(aCache.term).test(c.term)&&aCache.content&&aCache.content.length<13){d($.ui.autocomplete.filter(aCache.content,c.term));return}}catch(e){}var a="/Search/AutoComplete?f=";$.ajax({url:a+b,dataType:"json",data:c,success:function(f){aCache.field=b;aCache.term=c.term;aCache.content=f;d(f)}})}},minLength:2})}function clearSearchForm(a){clearForm(a);$(".cw-tagbox-search").removeClass(tagBoxSelectedClass);$(".cw-form-value").removeClass(inputSelectedClass)}function clearForm(a){$(":input.cw-form-value",a).each(function(){var c=this.type;var b=this.tagName.toLowerCase();if(c=="text"||c=="password"||b=="textarea"||c=="hidden"){this.value=""}else{if(c=="checkbox"||c=="radio"){this.checked=false}else{if(b=="select"){this.selectedIndex=-1}}}})}function setSelectedSearchTagValue(b){var f=b[0].id;var c="#"+b[0].rev;var e=b[0].rel;var a=$(c)!=null?$(c).val().split(";"):null;var d=a.indexOf(e);if(d>-1){a.splice(d,1)}else{a.push(e)}$(c).val(a.join(";"));b.toggleClass(tagBoxSelectedClass)}function toggleRowCheckboxes(b){var a=$("."+b.id+":enabled");if($(b).is(":checked")){a.attr("checked","checked")}else{a.removeAttr("checked")}}function strikeoutRowCheckboxes(){var a=$(".cw-row-checkbox:checked");a.attr("disabled","disabled");var b=a.parent("td").siblings();b.css("text-decoration","line-through");b.attr("disabled","true");b.children("a").attr("disabled","true")}function removeCheckedRows(){var a=$(".cw-row-checkbox-delete:checked");a.closest("tr").remove()}function isTableBodyEmpty(a){var b=$(a+" > TBODY > TR");return(b.length==0)}function toggleContentsTable(a){if(a.length>0){a.text(a.text().swap("Show","Hide"))}$(".cw-tbl-catalog-contents").toggle();closeContentPanel()}function hideEmptyContentsTable(){var b=$(".cw-tbl-catalog-contents");var a=$("#cw-catalog-contents-show-link");if(isTableBodyEmpty(".cw-tbl-catalog-contents")){b.hide();a.hide();$("#cw-catalog-contents-msg").show()}}function updateAddToCartAllButtontext(b){var a=b>0?"Add ("+b+")":"Add";$("#cw-add-all-to-cart span").text(a)}function setUpMediaFileDialog(c){var e=$("#upload-form");var a=c[0].rel;var b=c[0].rev;$("#contentId").val(a);$("#uploadTitle").text(b);if(e){e.dialog("destroy");var d=e.html();e.dialog({autoOpen:false,height:300,width:350,modal:true,title:"Select & upload new media files",buttons:{Upload:function(){saveMediaFilesAjax("#saveMediaFilesForm",function(){feedback("info","Files uploaded");resetMediaFileDialog(d);$(this).dialog("close")})},Cancel:function(){resetMediaFileDialog(d);$(this).dialog("close")}},close:function(){resetMediaFileDialog(d)}});e.dialog("open");resetUploaders();setupMediaUploader("previewVersionUploadContainer","previewVersionUpload","previewVersionFilelist","Preview",0);setupMediaUploader("fullVersionUploadContainer","fullVersionUpload","fullVersionFilelist","FullSong",1)}}function resetMediaFileDialog(a){var b=$("#upload-form");if(b){b.dialog("destroy");b.html(a)}}function showContentPanel(b){var c=b[0];if(!b.is(":disabled")){isContentEditMode=c.rel=="Edit";isContentSaveMode=c.rel=="Save";isContentViewMode=!isContentEditMode&&!isContentSaveMode;if(isContentViewMode){mediaStop()}var d=lastContentDetailLinkClicked!=null?b[0]==lastContentDetailLinkClicked[0]:false;if(!d||!isContentViewMode){var a=b[0].href;getContentDetailAjax(a,b)}else{closeContentPanel();lastContentDetailLinkClicked=null}}}function saveContentPanel(a,c){var b=a[0];isContentEditMode=b.rel=="Edit";isContentSaveMode=b.rel=="Save";isContentViewMode=!isContentEditMode&&!isContentSaveMode;if(isContentSaveMode){submitContentFormAjax("#cw-content-editor",a,c)}else{closeContentPanel();lastContentDetailLinkClicked=null}}function showContentPanelCallback(d,a){if(isContentViewMode&&isContentDetailShowing){closeContentPanel()}var f=a.closest("tr");var e=6;var c=$('<tr id="cw-content-detail-row"><td colspan="'+e+'">'+d);f.addClass("cw-row-selected");f.after(c);unwait();setupContentPanelUIControls();var b=a[0].rel;if(b){mediaPlay(b,"#cw-play-full")}isContentDetailShowing=true;lastContentDetailLinkClicked=a}function showContentPanelCallbackEdit(a,b,c){if(isContentSaveMode){feedback("info","Item Saved")}lastContentEditLinkClicked=isContentSaveMode?null:b;if(c){unwait();showContentPanel(c)}else{var d=$("#cw-content-detail-data");d.html(a);unwait();setupContentPanelUIControls();b.text(b.text().swap("Edit","Save"));b.toggleClass("cw-gray").toggleClass("cw-red");b.toggleClass("cw-content-edit-link").toggleClass("cw-content-save-link");b[0].href=b[0].href.swap("Edit","Save");b[0].rel=b[0].rel.swap("Edit","Save");isContentDetailShowing=true}}function setupContentPanelUIControls(){var a=$("#cw-content-detail-tabs");a.tabs({select:function(c,b){_currentContentDetailTab=b.panel.id}});if(_currentContentDetailTab!=null){a.tabs("select","#"+_currentContentDetailTab)}setupVolumeSlider();setupAutoComplete()}function deleteContentRight(b){var c=b.closest("tr");var a=b.prev(".cw-model-action");a.val(2);c.hide().next().hide()}function deleteTagCallback(a,b){var c=b[0].rel;$("."+c).hide();b.hide()}function closeContentPanel(){if(isContentDetailShowing){var a=$("#cw-content-detail-row");if(a.length>0){a.remove()}$(".cw-row-selected").removeClass("cw-row-selected");isContentDetailShowing=false;_currentContentDetailTab=null;mediaStop()}}var _lastMediaButtonPressed;function mediaPlay(b,a){soundPlay(b,false);togglePlayButton(a);$(".cw-media-repeat-link").removeAttr("disabled");$(".cw-media-skip-link").removeAttr("disabled");_lastMediaButtonPressed=a}function mediaRepeat(){if(soundPlayRepeat()!=sm_ps_playing){togglePlayButton(_lastMediaButtonPressed)}}function mediaFastForward(){fastForward()}function mediaRewind(){rewind()}function mediaCue(b){var a=b.length>0?b[0]:45*1000;cue(a)}function enableRewind(a){if(a){$(".cw-media-rew-link").removeAttr("disabled")}else{$(".cw-media-rew-link").attr("disabled",true)}}function enableFastForward(a){if(a){$(".cw-media-ffwd-link").removeAttr("disabled")}else{$(".cw-media-ffwd-link").attr("disabled",true)}}function togglePlayButton(a){togglePlayButtons(a,true)}function togglePlayButtons(d,a){var h="b-play";var f="b-pause";var c="cw-gray";var b="cw-green";var i=$(d);var e=i.children("span");if(!a){if(i.hasClass(b)){i.removeClass(b).addClass(c);e.removeClass(f).addClass(h)}}else{i.toggleClass(c);i.toggleClass(b);e.toggleClass(f);e.toggleClass(h);var g=i.siblings(".cw-media-play-link");if(g.length>0){togglePlayButtons("#"+g[0].id,false)}}}function toggleAllPlayButtons(){var a=$(".cw-media-play-link");a.each(function(c){var b=a[c];togglePlayButtons("#"+b.id,false)})}function setCurrentMediaTime(a){var b=millSecsToTimeCode(a,true);$("#cw-media-player-time").html(b)}function setCurrentPosition(b,a){a=a==0?1000:a;$("#cw-media-position").width((((b/a)*100)+"%"))}function setCurrentLoadPercentage(b,a){a=a==0?1000:a;$("#cw-media-loaded").width((((b/a)*100)+"%"))}function setTotalMediaLength(a){var b=millSecsToTimeCode(a,true);$("#cw-media-player-length").html(b)}function setupVolumeSlider(){var a=_currentVolume!=null&&_currentVolume>=0?_currentVolume:60;$("#cw-media-player-volume").slider({value:a,orientation:"horizontal",range:"min",animate:true,slide:function(c,b){changeVolume(b.value)}})}var isUserDetailShowing=false;var isCatalogDetailShowing=false;var catalogDetailId="#cw-catalog-detail";var userDetailId="#cw-user-detail";function showUserDetailPanel(a){var b=$(userDetailId);b.html(a);if(!isUserDetailShowing){b.show();isUserDetailShowing=true}}function showCatalogDetailPanel(a){var b=$(catalogDetailId);b.html(a);if(!isCatalogDetailShowing){b.show();isCatalogDetailShowing=true}};